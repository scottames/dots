{
  // Override to add model transformation for commands (until upstream PR is merged)
  "claudecode": {
    "name": "Claude Code",
    "export": [
      {
        "from": "AGENTS.md",
        "to": "CLAUDE.md",
        "merge": "composite"
      },
      {
        "from": "rules/**/*.md",
        "to": ".claude/rules/**/*.md"
      },
      {
        "from": "commands/**/*.md",
        "to": ".claude/commands/**/*.md",
        "when": { "$eq": ["$$source", "claude-plugin"] }
      },
      {
        "from": "commands/**/*.md",
        "to": ".claude/commands/**/*.md",
        "when": { "$ne": ["$$source", "claude-plugin"] },
        "map": [
          {
            "$pipeline": {
              "field": "model",
              "operations": [
                { "$replace": { "pattern": "^(?!anthropic/|claude-|opus$|sonnet$|haiku$).*/.+$", "with": "inherit" } },
                { "$replace": { "pattern": "^anthropic/", "with": "" } },
                { "$replace": { "pattern": "(-[0-9]+)\\.([0-9]+)", "with": "$1-$2", "flags": "g" } }
              ]
            }
          }
        ]
      },
      {
        "from": "agents/**/*.md",
        "to": ".claude/agents/**/*.md",
        "when": { "$eq": ["$$source", "claude-plugin"] }
      },
      {
        "from": "agents/**/*.md",
        "to": ".claude/agents/**/*.md",
        "when": { "$ne": ["$$source", "claude-plugin"] },
        "map": [
          { "$set": { "name": "$$filename" } },
          {
            "$pipeline": {
              "field": "model",
              "operations": [
                { "$replace": { "pattern": "^(?!anthropic/|claude-|opus$|sonnet$|haiku$).*/.+$", "with": "inherit" } },
                { "$replace": { "pattern": "^anthropic/", "with": "" } },
                { "$replace": { "pattern": "(-[0-9]+)\\.([0-9]+)", "with": "$1-$2", "flags": "g" } }
              ]
            }
          },
          {
            "$pipeline": {
              "field": "tools",
              "operations": [
                { "$map": { "replace": { "question": "AskUserQuestion", "notebook": "NotebookEdit", "exitplan": "ExitPlanMode" } } },
                { "$map": { "each": "capitalize" } },
                { "$reduce": { "type": "join", "separator": ", " } }
              ]
            }
          }
        ]
      },
      {
        "from": "skills/**/*",
        "to": ".claude/skills/**/*"
      },
      {
        "from": ["mcp.jsonc", "mcp.json"],
        "to": ".mcp.json",
        "when": { "$ne": ["$$targetRoot", "~/"] },
        "merge": "deep"
      },
      {
        "from": ["mcp.jsonc", "mcp.json"],
        "to": ".claude.json",
        "when": { "$eq": ["$$targetRoot", "~/"] },
        "merge": "deep"
      }
    ],
    "import": [
      {
        "from": "CLAUDE.md",
        "to": "AGENTS.md",
        "merge": "composite"
      },
      {
        "from": ".claude/rules/**/*.md",
        "to": "rules/**/*.md"
      },
      {
        "from": ".claude/commands/**/*.md",
        "to": "commands/**/*.md",
        "map": [
          {
            "$pipeline": {
              "field": "model",
              "operations": [
                { "$replace": { "pattern": "(-[0-9]+)-([0-9]+)", "with": "$1.$2", "flags": "g" } },
                { "$replace": { "pattern": "^(claude-.+)$", "with": "anthropic/$1" } }
              ]
            }
          }
        ]
      },
      {
        "from": ".claude/agents/**/*.md",
        "to": "agents/**/*.md",
        "map": [
          {
            "$pipeline": {
              "field": "model",
              "operations": [
                { "$replace": { "pattern": "(-[0-9]+)-([0-9]+)", "with": "$1.$2", "flags": "g" } },
                { "$replace": { "pattern": "^(claude-.+)$", "with": "anthropic/$1" } }
              ]
            }
          },
          {
            "$pipeline": {
              "field": "tools",
              "operations": [
                { "$reduce": { "type": "split", "separator": ", " } },
                { "$map": { "each": "lowercase" } },
                { "$map": { "replace": { "askuserquestion": "question", "notebookedit": "notebook", "exitplanmode": "exitplan" } } }
              ]
            }
          }
        ]
      },
      {
        "from": ".claude/skills/**/*",
        "to": "skills/**/*"
      },
      {
        "from": ".mcp.json",
        "to": "mcp.jsonc",
        "when": { "$ne": ["$$targetRoot", "~/"] }
      },
      {
        "from": ".claude.json",
        "to": "mcp.jsonc",
        "when": { "$eq": ["$$targetRoot", "~/"] }
      }
    ]
  }
}
